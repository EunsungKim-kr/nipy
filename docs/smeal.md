<p align="center">
    <img src="https://user-images.githubusercontent.com/23215270/74083252-335ccb00-4aa5-11ea-9045-3d87de5c70b2.png" width="500">
    <h1 align="center" style="font-size: 3em;">NiPy Docs</h1>
    <p align="center">
        <img src="https://img.shields.io/badge/python-v3.7-blue">
        <img src="https://img.shields.io/badge/license-MIT-green">
        <img src="https://img.shields.io/badge/test-passing-brightgreen">
    </p>
    <p><b>NiPy (Neis with ptrhon)</b>는 나이스와 연관된 수 많은 기능들을 제공합니다. Smeal (학교 급식 불러오기) 또한 그 중 하나입니다. 이번 문서에서는 Smeal에 대한 간단한 설명과 더불어 사용방법을 알려드립니다. 이번 문서를 읽고 숙지하신 후 여러분 만의 프로그램을 만들어 보시기 바랍니다.</p>
</p>

<br/>

## 일러두기

NiPy Smeal를 활용하시면 나이스 서버를 통해 나이스 상에 등록된 급식 정보를 확인하실 수 있습니다. 단 NiPy 고유의 서버를 활용하는 것이 아니기에 나이스 측에서 홈페이지를 개편하거나 저에게 서버 사용 중단을 요청하면 더 이상 서비스 되지 않을 수 있는 점 참고 바랍니다.

또한 급식 데이터를 보다 편리하게 수정하실 수 있도록 급식 데이터는 나이스 서버로부터 받은 "그대로" 제공됩니다. 즉 <br/>와 같은 html의 개행 코드나 1.20. 와 같은 알레르기 정보를 숫자로 제공한 것이 가공되지 않고 제공됩니다.

## 시작하기

NiPy Smeal는 다음과 같은 모듈을 사용하기에 반드시 존재하여야 합니다.

- requests
- json
- bs4 (Beautifulsoup)

아래 목록의 모듈은 급식 정보를 엑셀이나 csv 형식으로 저장받고 싶을 경우 존재해야 하는 모듈입니다.

- openpyxl
- csv

위의 모듈들의 설치가 완료되면 본 NiPy의 깃허브 저장소에서 `nipy.py` 파일을 다운받아 원하는 프로젝트가 있는 폴더에 설치하시면 됩니다.

## Step.0 기초정보 설정 하기

NiPy Smeal를 활용하기 위해선 우선 기초정보를 설정하여야 합니다. 기초정보는 급식 정보를 받아올 학교의 지역명, 학교 코드, 교급입니다.

```python
# 경기과학고등학교를 기본 조회 학교로 설정합니다.
m = nipy.Smeal("경기", "J100000447", "4")
```

위의 예시는 m 이라는 변수를 Smeal 활용자로서 지정하며 경기도내에 있는 경기과학고등학교를 기본 조회 학교로 설정합니다.

| 매개변수(예시) | 이름         | 설명                                                                                                                         |
| -------------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------- |
| 경기           | 교육청(지역) | 교육청 소재지를 입력합니다.<br/>시, 도를 제외한 두글자를 입력해 주세요.<br/>2자리의 문자열 자료형입니다.                     |
| J100000447     | 학교 코드    | 학교별 고유 코드입니다.                                                                                                      |
| 4              | 학교교급     | 학교교급 구분을 위한 매개변수입니다.<br/>1자리의 문자열 자료형입니다.<br/>(1) 유치원, (2) 초등학교, (3) 중학교, (4) 고등학교 |

## Step.1 하루치 급식 불러오기

NiPy Scode를 활용하면 하루치 급식과 한달치 급식을 불러올 수 있습니다. 하루치 급식 정보를 불러오는 함수는 `day()` 입니다.

```python
# 경기과고의 19년 10월 27일자 중식 급식을 출력합니다.
print(m.day("2019", "10", "27", "2"))
```

위의 예제는 경기도내에 있는 경기과고의 19년도 10월 27일자 중식 급식을 출력하는 예제 입니다.

| 매개변수(예시) | 이름     | 설명                                                                                               |
| -------------- | -------- | -------------------------------------------------------------------------------------------------- |
| 2019           | 조회년도 | 조회를 원하는 날짜의 년도입니다.<br/>4자리의 문자열 자료형 입니다.                                 |
| 10             | 조회월   | 조회를 원하는 날짜의 월입니다.<br/>2자리의 문자열 자료형 입니다.                                   |
| 27             | 조회일   | 조회를 원하는 날짜의 일입니다.<br/>2자리의 문자열 자료형 입니다.                                   |
| 2              | 급식종류 | 조회를 원하는 급식의 종류입니다.<br/>1자리의 문자열 자료형입니다.<br/>(1) 조식, (2) 중식, (3) 석식 |

위의 매개변수를 올바르게 입력하시면 다음과 같은 결과를 받으실 수 있습니다.

```
현미밥<br/>김치수제비5.6.9.13.18.<br/>부추겉절이5.6.13.<br/>순살바베큐볶음1.2.5.6.10.13.<br/>배추김치9.13.<br/>푸딩1.<br/>무쌈5.6.9.13.<br/>
```

## Step.2 한달치 급식 불러오기

NiPy Scode를 활용하면 하루치 급식과 한달치 급식을 불러올 수 있습니다. 한달치 급식 정보를 불러오고 저장하는 함수는 `month()` 입니다.

```python
# 경기과고의 19년 9월자 중식 급식을 딕셔너리 형식으로 반환, 출력합니다.
print(m.month("2019", "09", "2", "d"))
```

위의 예제는 경기도내에 있는 경기과고의 19년도 9월자 중식 급식을 반환, 출력하는 예제 입니다.

| 매개변수(예시) | 이름     | 설명                                                                                                      |
| -------------- | -------- | --------------------------------------------------------------------------------------------------------- |
| 2019           | 조회년도 | 조회를 원하는 날짜의 년도입니다.<br/>4자리의 문자열 자료형 입니다.                                        |
| 09             | 조회월   | 조회를 원하는 날짜의 월입니다.<br/>2자리의 문자열 자료형 입니다.                                          |
| 2              | 급식종류 | 조회를 원하는 급식의 종류입니다.<br/>1자리의 문자열 자료형입니다.<br/>(1) 조식, (2) 중식, (3) 석식        |
| d              | 출력종류 | 급식 정보를 저장할 출력 파일의 형식입니다.<br/>엑셀의 경우 `e` CSV의 경우 `c` 딕셔너리의 경우 `d` 입니다. |

위의 매개변수를 올바르게 입력하시면 다음과 같은 결과를 받으실 수 있습니다.

```
{'01': '비빔밥/약고추장5.6.10.13.<br/>꽈배기도넛1.2.5.6.<br/>백김치9.13.<br/>계란후라이1.5.<br/>요구르트(매일아침튼튼키즈)2.<br/>어묵무국5.6.13.<br/>', '02': '현미밥<br/>된장찌개5.6.13.<br/>파인애플<br/>대패바싹불고기(통마늘)10.13.<br/>쌈장1.5.6.13.<br/>보쌈김치9.13.<br/>모듬쌈<br/>콩나물파절이5.6.13.<br/>', ~~중략 ~~ '31': '보리밥<br/>건파래아몬 드볶음5.13.<br/>오징어돌나물/초장5.6.13.17.<br/>수제햄벅스테이크1.2.5.6.10.12.13.16.<br/>총각김치9.13.<br/>배<br/>참치김치찌개5.9.13.18.<br/>'}
```

만일 딕셔너리로 내용을 받으신 경우 key 값에 날짜를 넣어 급식 정보를 반환받으실 수 있습니다.

## 에러코드

NiPy가 실행되던 중 문제가 발생하면 다음과 같은 에러코드가 반환됩니다.  
참고로 month를 이용하여 한달치 급식 정보를 반환 받은 경우 에러코드가 출력되지 않았으나 각 급식 내용에 에러코드가 표시된 경우가 있을 수 있습니다.

| 에러코드     | 제목                 | 설명                                                                                                   |
| ------------ | -------------------- | ------------------------------------------------------------------------------------------------------ |
| SERVER ERROR | 서버 접속 실패       | 나이스 전산망에 접속하지 못하였습니다.<br/>점검중이거나 교육청 측에서 차단할 경우 발생하는 문제입니다. |
| SIZE ERROR   | 매개변수 길이 에러   | 매개변수로 받은 문자열의 길이가 올바르지 않습니다.<br/>매뉴얼에 따라 입력해 주십시오.                  |
| TYPE ERROR   | 매개변수 자료형 에러 | 매개변수로 받은 내용의 자료형이 올바르지 않습니다.<br/>매뉴얼에 따라 입력해 주십시오.                  |
| NO DATABASE  | 급식 정보 에러       | 조회 결과 급식이 없거나, 예정되지 않은 경우이거나, 조회에 실패한 경우입니다.                           |
| EXCEL ERROR  | 엑셀 변환 에러       | 한달치 급식을 엑셀에 저장하던 중 문제가 발생했습니다.<br/>모듈 상태등을 확인해 주십시오.               |
| CSV ERROR    | CSV 변환 에러        | 한달치 급식을 CSV에 저장하던 중 문제가 발생했습니다.<br/>모듈 상태등을 확인해 주십시오.                |
| DICT ERROR   | 딕셔너리 변환 에러   | 한달치 급식을 딕셔너리에 저장하던 중 문제가 발생했습니다.                                              |
| OFFICE ERROR | 교육청 / 지역 에러   | 매개변수로 받은 지역이 올바르지 않습니다.<br/>매뉴얼에 따라 입력해 주십시오.                           |
